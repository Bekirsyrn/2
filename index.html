<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Pro Striker – Ultimate</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: #000;
  font-family: 'Segoe UI', sans-serif;
}
canvas { display: block; }

/* UI */
#overlay {
  position: absolute;
  top: 20px;
  width: 100%;
  text-align: center;
  color: white;
  pointer-events: none;
}
.stats {
  font-size: 20px;
  letter-spacing: 2px;
  background: rgba(0,0,0,0.5);
  padding: 10px 20px;
  border-radius: 10px;
  display: inline-block;
}

#goal-anim {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: #f1c40f;
  font-size: 80px;
  font-weight: 900;
  display: none;
  text-shadow: 0 0 20px #000;
  font-style: italic;
}

/* POWER BAR */
#power {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  width: 300px;
  height: 15px;
  border: 2px solid #fff;
  border-radius: 10px;
}
#power-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #2ecc71, #f1c40f, #e74c3c);
  border-radius: 8px;
}

/* SHAKE */
@keyframes shake {
  0% { transform: translate(0,0); }
  25% { transform: translate(6px,0); }
  50% { transform: translate(-6px,0); }
  75% { transform: translate(6px,0); }
  100% { transform: translate(0,0); }
}
</style>
</head>

<body>

<div id="overlay">
  <div class="stats">
    SKOR: <span id="score">0</span> |
    EN YÜKSEK: <span id="high">0</span>
  </div>
</div>

<div id="goal-anim">GOOOOOL!</div>

<div id="power">
  <div id="power-fill"></div>
</div>

<script>
/* ======================
   ENGINE
====================== */
const { Engine, Render, Runner, World, Bodies, Body, Events, Common } = Matter;

const engine = Engine.create();
const world = engine.world;
const width = window.innerWidth;
const height = window.innerHeight;

const render = Render.create({
  element: document.body,
  engine: engine,
  options: {
    width,
    height,
    wireframes: false,
    background: 'radial-gradient(circle, #2d5a27 0%, #1a472a 100%)'
  }
});

/* ======================
   FIELD
====================== */
for(let i=0;i<5;i++){
  World.add(world,
    Bodies.rectangle(width/2, height - i*150, width, 2, {
      isStatic:true,
      render:{fillStyle:'rgba(255,255,255,0.1)'}
    })
  );
}

/* ======================
   GOAL
====================== */
const goalWidth = 350;
World.add(world, [
  Bodies.rectangle(width/2-goalWidth/2,180,15,250,{isStatic:true}),
  Bodies.rectangle(width/2+goalWidth/2,180,15,250,{isStatic:true}),
  Bodies.rectangle(width/2,60,goalWidth+15,15,{isStatic:true})
]);

/* ======================
   GOALIE
====================== */
const goalie = Bodies.rectangle(width/2,150,60,90,{
  isStatic:true,
  render:{ fillStyle:'#2980b9' }
});
World.add(world, goalie);

/* ======================
   BALL
====================== */
let ball;
function spawnBall(){
  if(ball) World.remove(world, ball);
  ball = Bodies.circle(width/2, height-120, 22,{
    restitution:0.7,
    frictionAir:0.02,
    density:0.005,
    render:{ fillStyle:'#fff' }
  });
  ball.isGoal=false;
  World.add(world, ball);
}
spawnBall();

/* ======================
   SCORE
====================== */
let score=0, high=0;

/* ======================
   INPUT & POWER
====================== */
let startPoint=null;
let charging=false;
let power=0;
const powerFill=document.getElementById('power-fill');

window.addEventListener('mousedown',e=>{
  startPoint={x:e.clientX,y:e.clientY};
  charging=true;
});

window.addEventListener('mouseup',e=>{
  if(!startPoint) return;
  charging=false;

  const angle=Math.atan2(
    startPoint.y-e.clientY,
    startPoint.x-e.clientX
  );

  Body.applyForce(ball, ball.position,{
    x:Math.cos(angle)*power,
    y:Math.sin(angle)*power
  });

  power=0;
  powerFill.style.width='0%';
  startPoint=null;
});

/* ======================
   GAME LOOP
====================== */
let reactionDelay = 20;

Events.on(engine,'beforeUpdate',()=>{

  /* POWER CHARGE */
  if(charging && power<0.05){
    power+=0.001;
    powerFill.style.width=`${(power/0.05)*100}%`;
  }

  /* GOALIE AI */
  if(reactionDelay--<=0){
    const targetX = ball.position.x + Common.random(-30,30);
    const newX = goalie.position.x + (targetX-goalie.position.x)*0.05;
    Body.setPosition(goalie,{
      x:Common.clamp(
        newX,
        width/2-goalWidth/2+40,
        width/2+goalWidth/2-40
      ),
      y:150
    });
  }

  /* GOAL CHECK */
  if(!ball.isGoal &&
     ball.position.y<120 &&
     ball.position.x>width/2-160 &&
     ball.position.x<width/2+160){
      ball.isGoal=true;
      celebrate();
  }
});

/* ======================
   GOAL EFFECT
====================== */
function celebrate(){
  score++;
  document.getElementById('score').innerText=score;
  if(score>high){
    high=score;
    document.getElementById('high').innerText=high;
  }

  const msg=document.getElementById('goal-anim');
  msg.style.display='block';

  engine.timing.timeScale=0.4;
  document.body.style.animation='shake 0.4s';

  setTimeout(()=>{
    msg.style.display='none';
    engine.timing.timeScale=1;
    document.body.style.animation='';
    reactionDelay=20;
    spawnBall();
  },1200);
}

Render.run(render);
Runner.run(Runner.create(), engine);
</script>

</body>
</html>
